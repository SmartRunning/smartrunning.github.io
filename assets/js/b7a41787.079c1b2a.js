"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[390],{6148:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"architecture/training-algorithm","title":"Training Algorithm","description":"This document describes the HIGH-LEVEL architecture of the training plan generation system. Input parameters, calculation formulas, optimization methods, variable weights, and scoring algorithms are proprietary and not disclosed publicly.","source":"@site/docs/architecture/training-algorithm.md","sourceDirName":"architecture","slug":"/architecture/training-algorithm","permalink":"/docs/architecture/training-algorithm","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/architecture/training-algorithm.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"Training Algorithm"},"sidebar":"tutorialSidebar","previous":{"title":"Operations","permalink":"/docs/architecture/operations"},"next":{"title":"Database Schema","permalink":"/docs/storage/database-schema"}}');var s=i(4848),t=i(8453);const a={sidebar_position:8,title:"Training Algorithm"},l="Training Plan Generation Algorithm",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Algorithm Flow",id:"algorithm-flow",level:2},{value:"Data Sources",id:"data-sources",level:2},{value:"Calendar Construction",id:"calendar-construction",level:2},{value:"Optimization Process",id:"optimization-process",level:2},{value:"High-Level Approach",id:"high-level-approach",level:3},{value:"Training Load Simulation",id:"training-load-simulation",level:2},{value:"Simulation Process",id:"simulation-process",level:3},{value:"Tracked Metrics",id:"tracked-metrics",level:3},{value:"Workout Assignment",id:"workout-assignment",level:2},{value:"Assignment Process",id:"assignment-process",level:3},{value:"Workout Selection Criteria",id:"workout-selection-criteria",level:3},{value:"Output Structure",id:"output-structure",level:2},{value:"Daily Plan Document Structure",id:"daily-plan-document-structure",level:3},{value:"Technical Implementation",id:"technical-implementation",level:2},{value:"Asynchronous Processing",id:"asynchronous-processing",level:3},{value:"Performance Characteristics",id:"performance-characteristics",level:3},{value:"Dependencies",id:"dependencies",level:3},{value:"Integration Points",id:"integration-points",level:2},{value:"API Endpoints",id:"api-endpoints",level:3},{value:"Database Collections",id:"database-collections",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"training-plan-generation-algorithm",children:"Training Plan Generation Algorithm"})}),"\n",(0,s.jsx)(n.admonition,{title:"Proprietary Information",type:"warning",children:(0,s.jsx)(n.p,{children:"This document describes the HIGH-LEVEL architecture of the training plan generation system. Input parameters, calculation formulas, optimization methods, variable weights, and scoring algorithms are proprietary and not disclosed publicly."})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The SmartRunning platform generates personalized training plans using an optimization algorithm that creates training progressions based on athlete data and race preparation requirements."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"For high-level architecture context"}),", see ",(0,s.jsx)(n.a,{href:"/docs/architecture/overview",children:"Architecture"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"algorithm-flow",children:"Algorithm Flow"}),"\n",(0,s.jsx)(n.p,{children:"The training plan generation follows this high-level flow:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"User Request (via Flask API)\n    \u2193\nTrainingPlanGenerator spawns subprocess\n    \u2193\n[SUBPROCESS: generate_training_plan.py]\n    \u251c\u2500 1. Load runner parameters from MongoDB\n    \u251c\u2500 2. Load training schema template\n    \u251c\u2500 3. Calculate preparation start date\n    \u251c\u2500 4. Build training calendar\n    \u251c\u2500 5. Run optimization process\n    \u251c\u2500 6. Simulate training load progression\n    \u251c\u2500 7. Assign workout sessions\n    \u251c\u2500 8. Save plan to database (one document per day)\n    \u2514\u2500 9. Return plan ID\n    \u2193\nBackground job completes\n    \u2193\nUser views generated plan\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Files:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"app/generate_training_plan.py"})," - Core optimization engine"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"app/training_plan_generator.py"})," - API wrapper and subprocess management"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"data-sources",children:"Data Sources"}),"\n",(0,s.jsx)(n.p,{children:"The algorithm retrieves data from:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"MongoDB Collections"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"runner"})," - Athlete parameters and configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"trainingplanschema"})," - Workout templates and training blocks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"trainingplan"})," - Output storage (one document per day)"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Input from User"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Target race date"}),"\n",(0,s.jsx)(n.li,{children:"Training schema selection"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"Specific parameter names, default values, and data structures are proprietary."})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"calendar-construction",children:"Calendar Construction"}),"\n",(0,s.jsx)(n.p,{children:"The algorithm builds a training calendar working backwards from the race date:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Calculate total preparation duration"}),"\n",(0,s.jsx)(n.li,{children:"Determine start date (aligned to Monday)"}),"\n",(0,s.jsx)(n.li,{children:"Create daily schedule with training/rest days"}),"\n",(0,s.jsx)(n.li,{children:"Assign training blocks and phases"}),"\n",(0,s.jsx)(n.li,{children:"Mark recovery weeks and taper period"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"optimization-process",children:"Optimization Process"}),"\n",(0,s.jsx)(n.p,{children:"The system uses optimization techniques to determine training stress distribution across all training days."}),"\n",(0,s.jsx)(n.admonition,{title:"Proprietary Information",type:"note",children:(0,s.jsx)(n.p,{children:"The optimization algorithm, objective functions, constraint definitions, and convergence parameters are proprietary."})}),"\n",(0,s.jsx)(n.h3,{id:"high-level-approach",children:"High-Level Approach"}),"\n",(0,s.jsx)(n.p,{children:"The optimization process:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Explores the solution space to find optimal progressions"}),"\n",(0,s.jsx)(n.li,{children:"Balances multiple competing objectives"}),"\n",(0,s.jsx)(n.li,{children:"Respects physiological and scheduling constraints"}),"\n",(0,s.jsx)(n.li,{children:"Handles high-dimensional problems (100+ training days)"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"training-load-simulation",children:"Training Load Simulation"}),"\n",(0,s.jsx)(n.p,{children:"After optimization, the system simulates the training plan to verify physiological responses."}),"\n",(0,s.jsx)(n.h3,{id:"simulation-process",children:"Simulation Process"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"For each day in plan:\n    1. Get assigned training stress value\n    2. Calculate fitness response\n    3. Calculate fatigue response\n    4. Update training load metrics\n    5. Verify constraints are satisfied\n"})}),"\n",(0,s.jsx)(n.h3,{id:"tracked-metrics",children:"Tracked Metrics"}),"\n",(0,s.jsx)(n.p,{children:"The system tracks fitness and fatigue metrics throughout the plan:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Long-term fitness levels"}),"\n",(0,s.jsx)(n.li,{children:"Short-term fatigue levels"}),"\n",(0,s.jsx)(n.li,{children:"Training stress balance"}),"\n",(0,s.jsx)(n.li,{children:"Recovery status"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"Specific formulas and physiological models are proprietary."})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"workout-assignment",children:"Workout Assignment"}),"\n",(0,s.jsx)(n.p,{children:"After determining training stress distribution, workouts are assigned from the schema template."}),"\n",(0,s.jsx)(n.h3,{id:"assignment-process",children:"Assignment Process"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"For each training day:\n    1. Identify the training block and week\n    2. Get available workouts from schema\n    3. Select workout matching training stress target\n    4. Assign workout session code to that day\n"})}),"\n",(0,s.jsx)(n.h3,{id:"workout-selection-criteria",children:"Workout Selection Criteria"}),"\n",(0,s.jsx)(n.p,{children:"Workouts are matched based on:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Training block/phase"}),"\n",(0,s.jsx)(n.li,{children:"Week progression"}),"\n",(0,s.jsx)(n.li,{children:"Day of week"}),"\n",(0,s.jsx)(n.li,{children:"Training stress target"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"output-structure",children:"Output Structure"}),"\n",(0,s.jsx)(n.p,{children:"The generated training plan is stored in MongoDB with one document per day."}),"\n",(0,s.jsx)(n.h3,{id:"daily-plan-document-structure",children:"Daily Plan Document Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'{\n  "_id": ObjectId,\n  "runner_id": ObjectId,\n  "date": ISODate,\n  "week_number": Number,\n  "day_of_week": Number,\n  "session_code": String,\n  "session_type": String,\n  "session_definition": String,\n  "is_training_day": Boolean,\n  "is_recovery_week": Boolean,\n  "phase": String,\n  "created_at": ISODate\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["For complete database schema, see ",(0,s.jsx)(n.a,{href:"/docs/storage/database-schema",children:"Database Schema"}),"."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"technical-implementation",children:"Technical Implementation"}),"\n",(0,s.jsx)(n.h3,{id:"asynchronous-processing",children:"Asynchronous Processing"}),"\n",(0,s.jsx)(n.p,{children:"Training plan generation runs as a background job:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"API Request"}),": User requests plan generation via Flask API"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Job Creation"}),": System creates background job record"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Subprocess Spawn"}),": Main process spawns subprocess for optimization"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Progress Updates"}),": Job progress tracked in ",(0,s.jsx)(n.code,{children:"background_jobs"})," collection"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Completion"}),": Plan saved to database, job marked complete"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Why subprocess?"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"CPU-intensive optimization doesn't block web server"}),"\n",(0,s.jsx)(n.li,{children:"Isolated memory space"}),"\n",(0,s.jsx)(n.li,{children:"Crash-safe"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["For details, see ",(0,s.jsx)(n.a,{href:"/docs/architecture/data-flow",children:"Data Flow"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"performance-characteristics",children:"Performance Characteristics"}),"\n",(0,s.jsx)(n.p,{children:"Typical generation times:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Short plans"})," (8-12 weeks): 5-10 seconds"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Standard marathon plans"})," (16-20 weeks): 15-30 seconds"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Long ultra plans"})," (24+ weeks): 30-60 seconds"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"dependencies",children:"Dependencies"}),"\n",(0,s.jsx)(n.p,{children:"Key Python libraries:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"scipy"}),": Optimization algorithms"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"numpy"}),": Numerical computations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"pandas"}),": Data structure manipulation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"pymongo"}),": Database operations"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"integration-points",children:"Integration Points"}),"\n",(0,s.jsx)(n.h3,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"POST /runners/<id>/training-plans/generate"})," - Initiate plan generation"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Input: ",(0,s.jsx)(n.code,{children:"schema_id"}),", ",(0,s.jsx)(n.code,{children:"marathon_date"})]}),"\n",(0,s.jsxs)(n.li,{children:["Output: ",(0,s.jsx)(n.code,{children:"job_id"})," for tracking progress"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"GET /runners/<id>/training-plans"})," - Retrieve generated plans"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"GET /training-plans/<plan_id>"})," - Get specific plan details"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"database-collections",children:"Database Collections"}),"\n",(0,s.jsx)(n.p,{children:"Plan generation interacts with:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"runner"}),": Reads athlete configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"trainingplanschema"}),": Reads workout templates"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"trainingplan"}),": Writes daily plan documents"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"background_jobs"}),": Tracks generation progress"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/architecture/overview",children:"System Overview"})," - Architecture and components"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/architecture/data-flow",children:"Data Flow"})," - Asynchronous processing flow"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/storage/database-schema",children:"Database Schema"})," - Data structures"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Document Version:"})," 2.0 (Public - Sanitized)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," This document intentionally omits all proprietary information including input parameters, specific formulas, model coefficients, optimization methods, constraint definitions, and scoring algorithms that constitute SmartRunning's competitive advantage."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var r=i(6540);const s={},t=r.createContext(s);function a(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);